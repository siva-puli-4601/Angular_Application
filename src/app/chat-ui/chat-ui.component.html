<div class="chat-layout">
  <!-- Sidebar for previous chats -->
  <div class="sidebar" [ngClass]="{'hidden': isSidebarHidden}">
    <img src="assets/toogle.jfif" alt="Close" class="close-icon" (click)="toggleSidebar()"/>
    <h3>Previous Chats</h3>
    <ul>
      <li *ngFor="let chat of previousChats; let i = index" (click)="loadChat(i)">
        Chat {{ i + 1 }} ({{ chat.date | date: 'short' }})
      </li>
    </ul>
  </div>

  <!-- Main chat container -->
  <div class="main-chat-container" [ngStyle]="{'margin-left': isSidebarHidden ? '0' : '250px'}">
    <!-- Sidebar toggle icon -->
    <img src="assets/toogle.jfif" alt="Open" class="close-icon" (click)="toggleSidebar()" *ngIf="isSidebarHidden"/>

    <!-- Theme toggle button -->
    <div class="theme-toggle">
      <button (click)="toggleTheme()">{{ isDarkTheme ? '🌞 Light' : '🌙 Dark' }}</button>
    </div>

    <div class="chat-box">
      <div *ngFor="let message of currentChat.messages" class="message-wrapper" 
           [ngClass]="{'user-wrapper': message.sender === 'user', 'bot-wrapper': message.sender === 'bot'}">
        <div class="message" [ngClass]="{'user-message': message.sender === 'user', 'bot-message': message.sender === 'bot'}">
          <div class="message-text" [innerHTML]="message.text"></div>
        </div>
      </div>
    </div>

    <!-- Chat input -->
    <div class="chat-input-container">
      <textarea [(ngModel)]="userInput" placeholder="Type your message..." rows="1" ></textarea>
      <button (click)="sendMessage()">Send</button>
      <button (click)="saveChat()">Save</button>
    </div>
  </div>
</div>
